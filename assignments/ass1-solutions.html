<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Stephen Connor">

<title>IPS: Assignment 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="ass1_files/libs/clipboard/clipboard.min.js"></script>
<script src="ass1_files/libs/quarto-html/quarto.js"></script>
<script src="ass1_files/libs/quarto-html/popper.min.js"></script>
<script src="ass1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ass1_files/libs/quarto-html/anchor.min.js"></script>
<link href="ass1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ass1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="ass1_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="ass1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ass1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ass1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="ass1_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="ass1_files/libs/quarto-contrib/bookup_fonts_embed-0.0/fonts-download.css" rel="stylesheet">
<link href="ass1_files/libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="ass1_files/libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script>
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../css/ips.scss">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-full">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Menu</h2>
   
  <ul>
  <li><a href="#starter" id="toc-starter" class="nav-link active" data-scroll-target="#starter">Starter</a></li>
  <li><a href="#main-course" id="toc-main-course" class="nav-link" data-scroll-target="#main-course">Main course</a></li>
  <li><a href="#dessert" id="toc-dessert" class="nav-link" data-scroll-target="#dessert">Dessert</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="ass1-solutions.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">IPS: Assignment 1</h1>
<p class="subtitle lead">Due date: 10am, 05/10/23</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Stephen Connor </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="section" class="level22">
<p class="heading"></p>
</section>
<section id="starter" class="level2">
<h2 class="anchored" data-anchor-id="starter">Starter</h2>
<p><em>These questions should help you to gain confidence with the basics.</em></p>
<p><strong>S1.</strong> <i class="fa-solid fa-cloud-upload-alt" aria-label="cloud-upload-alt"></i> <strong>Hand-in<br>
</strong> A bag contains six balls numbered 1–6. Two balls are drawn at random (without replacement), and the outcome is recorded as <span class="math inline">\((i,j)\)</span> if ball <span class="math inline">\(i\)</span> is drawn first, and ball <span class="math inline">\(j\)</span> drawn second. How many possible outcomes are there?<br>
Now suppose that four of the numbered balls are white, and the other two are black. How many outcomes are there in which the following occur?</p>
<ol type="a">
<li>both balls are white;</li>
<li>both balls have the same colour;</li>
<li>at least one of the balls is white?</li>
</ol>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Since we are sampling without replacement there are <span class="math inline">\(6\times 5 = 30\)</span> different possible outcomes. <strong>[1]</strong></p>
<ol type="a">
<li>Here we need to choose a white ball followed by another white ball: <span class="math inline">\(4\times 3 = 12\)</span>; <strong>[1]</strong></li>
<li>As in part (a), the number of ways in which two black balls can be chosen is <span class="math inline">\(2\times 1 = 2\)</span>. Hence the total number of outcomes for which both balls have the same colour is <span class="math inline">\(12+2 = 14\)</span>. <strong>[1]</strong></li>
<li>Here we need either both balls to be white (which we’ve already counted), or exactly one to be white. There are <span class="math inline">\(4\times 2 = 8\)</span> ways for the first ball to be white and the second black, and another <span class="math inline">\(2\times 4 = 8\)</span> ways for the balls to come out in the opposite order; so there are <span class="math inline">\(16+12 = 28\)</span> possible outcomes altogether. (Alternatively, we know from part (b) that there are only two outcomes where both balls are black, and since there are 30 possible outcomes in total, 28 of these must include at least one white ball.) <strong>[2]</strong></li>
</ol>
</div>
</div>
</div>
<section id="section-1" class="level7">
<p class="heading"></p>
<p><strong>S2.</strong> <i class="fa-solid fa-cloud-upload-alt" aria-label="cloud-upload-alt"></i> <strong>Hand-in</strong></p>
<ol type="a">
<li>Two football teams, each with 11 players, shake hands at the end of a match: every player on Team A shakes hands with every player on Team B. How many handshakes will there be?<br>
</li>
<li>How many will there be if every player shakes hands with every other player (including those on their own team)?</li>
</ol>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ol type="a">
<li>Each player from Team A has to shake hands with 11 players from Team B. So there are <span class="math inline">\(11^2 = 121\)</span> handshakes in total. <strong>[2]</strong></li>
<li>If everyone shakes hands with everyone else, then we need to count the number of ways of choosing two players out of 22: <span class="math inline">\(C^{22}_2 = 231\)</span>. (Alternatively, we could count how many handshakes take place between two members of the same team, and add this to the 121 that we obtained above. With 11 people in Team A, there are <span class="math inline">\(C^{11}_2 = 55\)</span> pairs of players to shake hands, and then there’s the same number of handshakes between members of Team B. This gives 110 extra handshakes.) <strong>[3]</strong></li>
</ol>
</div>
</div>
</div>
</section>
<section id="section-2" class="level7">
<p class="heading"></p>
<p><strong>S3.</strong> 30 sweets are to be divided amongst 5 children. In how many ways can this be done? What if every child must be given at least two sweets each?</p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>There are <span class="math inline">\(C^{30+5-1}_{5-1} = 46,376\)</span> ways of dividing the sweets (allowing for the possibility of some children receiving none). If every child must be given two sweets, then if we do this first of all there are 20 sweets left to be divided: there are <span class="math inline">\(C^{20+5-1}_{5-1} = 10,626\)</span> ways of doing this.</p>
</div>
</div>
</div>
</section>
<section id="section-3" class="level7">
<p class="heading"></p>
<p><strong>S4.</strong> Consider two events <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>. Let <span class="math inline">\(C\)</span> be the event that “<span class="math inline">\(A\)</span> or <span class="math inline">\(B\)</span> occurs, but not both”. Express <span class="math inline">\(C\)</span> in terms of <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>, using only the basic operations “union”, “intersection”, and “complement”.</p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>There are many possible answers. Here are three: <span class="math display">\[
\begin{split}
            C &amp;= (A\cup B)\cap (A \cap B)^c\\
            &amp;= (A\cup B)\cap (A^c \cup B^c)\\
            &amp;=(A \cap B^c ) \cup (B \cap A^c ).
\end{split}
\]</span></p>
</div>
</div>
</div>
</section>
<section id="section-4" class="level7">
<p class="heading"></p>
<p><strong>S5.</strong> Let <span class="math inline">\(E\)</span>, <span class="math inline">\(F\)</span> and <span class="math inline">\(G\)</span> be three events. Find expressions for these events:</p>
<ol type="a">
<li>Only <span class="math inline">\(E\)</span> occurs;</li>
<li><span class="math inline">\(E\)</span> or <span class="math inline">\(F\)</span> occurs, but not <span class="math inline">\(G\)</span>;</li>
<li>At least one of the events occurs;</li>
<li>At most two of the events occur;</li>
<li>At most one of the events occurs.</li>
</ol>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ol type="a">
<li><span class="math inline">\(E\cap F^c\cap G^c\)</span>;</li>
<li><span class="math inline">\((E\cup F) \cap G^c\)</span>;</li>
<li><span class="math inline">\(E\cup F\cup G\)</span>;</li>
<li><span class="math inline">\((E\cap F\cap G)^c\)</span>;</li>
<li><span class="math inline">\((E\cap F)^c \cap (E\cap G)^c \cap (F\cap G)^c\)</span>.</li>
</ol>
<p>(You may have slightly different answers to the above, but if so then you should be able to prove that your versions are equivalent to mine!)</p>
</div>
</div>
</div>
</section>
<section id="section-5" class="level7">
<p class="heading"></p>
<p><strong>S6.</strong> Two dice are thrown. Let <span class="math inline">\(A\)</span> be the event that the sum of the dice is even; let <span class="math inline">\(B\)</span> be the event that the first die shows a higher number than the second; and let <span class="math inline">\(C\)</span> be the event that the sum of the two dice is 6. List all the outcomes belonging to the events <span class="math inline">\(A\cap B\)</span>, <span class="math inline">\(A\cup C\)</span>, <span class="math inline">\(A\cap C^c\)</span>, <span class="math inline">\(A^c\cap C\)</span>, <span class="math inline">\(A\cap B\cap C\)</span>.</p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Writing <span class="math inline">\((i,j)\)</span> for the outcome of the two dice, where <span class="math inline">\(i\)</span> is the score on the first die and <span class="math inline">\(j\)</span> the score on the second, we have: <span class="math display">\[
\begin{split}
A \cap B &amp;= \{(3,1),(4,2),(5,1),(5,3),(6,2),(6,4)\} \,; \\
A\cup C &amp;= A = \{(1,1),(1,3),(1,5),(2,2),(2,4),(2,6),(3,1),(3,3),(3,5),(4,2),(4,4), \\
&amp;\qquad\qquad (4,6),(5,1),(5,3),(5,5),(6,2),(6,4),(6,6)\} \,; \\
A\cap C^c &amp;= \{(1,1),(1,3),(2,2),(2,6),(3,1),(3,5),(4,4),(4,6),(5,3),(5,5),\\
&amp;\qquad\qquad (6,2),(6,4),(6,6)\} \,; \\
A^c\cap C &amp;= \emptyset \,; \\
A\cap B \cap C &amp;= \{(4,2),(5,1)\} \,.
\end{split}
\]</span></p>
</div>
</div>
</div>
<section id="section-6" class="level22">
<p class="heading"></p>
</section>
</section>
</section>
<section id="main-course" class="level2">
<h2 class="anchored" data-anchor-id="main-course">Main course</h2>
<p><em>These are important, and cover some of the most substantial parts of the course.</em></p>
<section id="section-7" class="level7">
<p class="heading"></p>
<p><strong>M1.</strong> In how many ways can three men and three women be seated in a row if</p>
<ol type="a">
<li>there are no restrictions on the order;</li>
<li>no two members of the same sex can sit next to one another;</li>
<li>there are three married (male-female) couples, and each husband and wife must sit next to one another?</li>
</ol>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ol type="a">
<li>With no restrictions there are <span class="math inline">\(6! = 720\)</span> ways.</li>
<li>There are <span class="math inline">\(3!=6\)</span> ways of arranging the men, and 6 ways of arranging the women: this gives 36 arrangements. However, for every ordering of the men and women, we can choose whether to put a man or a woman in the first position – this means that the required number of arrangements is 72.</li>
<li>There are <span class="math inline">\(3! = 6\)</span> ways of arranging the three couples in order. But each husband and wife can be arranged in <span class="math inline">\(2!=2\)</span> ways, and so there is a total of <span class="math inline">\(3!2!2!2! = 48\)</span> arrangements.</li>
</ol>
</div>
</div>
</div>
</section>
<section id="section-8" class="level7">
<p class="heading"></p>
<p><strong>M2.</strong> A student has 1 bookshelf, 12 novels (among which 3 titles appear twice each), 5 books on probability theory, 4 knitting books and 2 dictionaries. In how many ways can he put the books on the shelf such that books in the same category are next to each other? Possibilities where the doubles are switched are considered to be the same and are not counted separately. (Hint: approx. <span class="math inline">\(8.3\times10^{12}\)</span>.)</p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>The 4 categories can be placed in <span class="math inline">\(4!=24\)</span> ways. The 5 books on probability theory can be placed in <span class="math inline">\(5!=120\)</span> ways, the 4 knitting books in <span class="math inline">\(4!=24\)</span> and the 2 dictionaries in <span class="math inline">\(2!=2\)</span> ways. For the novels, by Proposition 1.4 there are <span class="math inline">\(12!/(2!2!2!)\)</span> ways of arranging them. This gives a total of</p>
<p><span class="math display">\[ 4!5!4!2!\frac{12!}{2!2!2!}\approx 8.3\times 10^{12} \]</span> ways to order all books.</p>
</div>
</div>
</div>
</section>
<section id="section-9" class="level7">
<p class="heading"></p>
<p><strong>M3.</strong> <i class="fa-solid fa-cloud-upload-alt" aria-label="cloud-upload-alt"></i> <strong>Hand-in<br>
</strong> Prove, by expanding in terms of factorials, that</p>
<p><span class="math display">\[ {n\choose r} = {{n-1}\choose{r-1}} + {{n-1}\choose r}, \qquad 1\leq r\leq n \,. \]</span></p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p><span class="math display">\[
\begin{split}
{{n-1}\choose{r-1}} + {{n-1}\choose r} &amp;= \frac{(n-1)!}{(n-r)!(r-1)!} + \frac{(n-1)!}{(n-1-r)!r!}  \\
&amp;= \frac{(n-1)!}{(n-r)!r!}(r + (n-r)) \\
&amp;= \frac{n!}{(n-r)!r!} = {n\choose r} \,.
\end{split}
\]</span> <strong>[5]</strong></p>
</div>
</div>
</div>
</section>
<section id="section-10" class="level7">
<p class="heading"></p>
<p><strong>M4.</strong> <i class="fa-solid fa-cloud-upload-alt" aria-label="cloud-upload-alt"></i> <strong>Hand-in<br>
</strong> Consider a group of <span class="math inline">\(n\)</span> objects, labelled <span class="math inline">\(1,\dots,n\)</span>. How many (unordered) sets of size <span class="math inline">\(r\)</span> are there that contain object 1? How many are there that <em>don’t</em> contain object 1? Use these observations to re-prove the identity in question <strong>M3</strong>.</p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>There are <span class="math inline">\({{n-1}\choose{r-1}}\)</span> sets of size <span class="math inline">\(r\)</span> that contain object 1. (First put object 1 in the set, and then choose another <span class="math inline">\(r-1\)</span> objects from the remaining <span class="math inline">\(n-1\)</span> objects available.) <strong>[1]</strong> There are <span class="math inline">\({{n-1}\choose r}\)</span> sets that don’t contain object 1. <strong>[1]</strong> There are a total of <span class="math inline">\({n\choose r}\)</span> unordered sets of size <span class="math inline">\(r\)</span> possible with <span class="math inline">\(n\)</span> objects, and since all of these must either contain object 1 or not contain it, we see that <span class="math display">\[ {n\choose r} = {{n-1}\choose{r-1}} + {{n-1}\choose r}, \qquad 1\leq r\leq n \,.\]</span> <strong>[3]</strong></p>
</div>
</div>
</div>
</section>
<section id="section-11" class="level7">
<p class="heading"></p>
<p><strong>M5.</strong> Prove that, for sets <span class="math inline">\(E\)</span> and <span class="math inline">\(F\)</span>:</p>
<ol type="a">
<li><span class="math inline">\(E\cap F \subseteq E \subseteq E\cup F\)</span></li>
<li>if <span class="math inline">\(E\subseteq F\)</span> then <span class="math inline">\(F^c\subseteq E^c\)</span></li>
<li><span class="math inline">\(E = (E\cap F)\cup (E\cap F^c)\)</span>, and show that this union is disjoint.</li>
</ol>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ol type="a">
<li><p>If <span class="math inline">\(\omega \in E\cap F\)</span>, then <span class="math inline">\(\omega\in E\)</span> (and <span class="math inline">\(\omega \in F\)</span>), and so <span class="math inline">\(E\cap F\subseteq E\)</span>. Similarly for <span class="math inline">\(E\subseteq E\cup F\)</span>.</p></li>
<li><p>Let <span class="math inline">\(\omega \in F^c\)</span>, and suppose that <span class="math inline">\(\omega\in E\)</span> also. Then, since <span class="math inline">\(E\subseteq F\)</span>, we would have <span class="math inline">\(\omega\in F\)</span>. But this would imply that <span class="math inline">\(\omega\in F\)</span> <span class="math inline">\(\omega \in F^c\)</span>, i.e.&nbsp;that <span class="math inline">\(\omega \in F\cap F^c = \emptyset\)</span>, which is a contradiction. Thus <span class="math inline">\(\omega\notin E\)</span>, i.e.&nbsp;<span class="math inline">\(F^c\subseteq E^c\)</span>.</p></li>
<li><p>We can write</p></li>
</ol>
<p><span class="math display">\[ (E\cap F)\cup (E\cap F^c) = E\cap (F\cup F^c) = E\cap \Omega = E \,. \]</span></p>
<p>Furthermore, we know that <span class="math inline">\(F\cap F^c = \emptyset\)</span>, and so <span class="math inline">\((E\cap F)\cap (E\cap F^c) = E\cap (F\cap F^c) = \emptyset\)</span> (by part (a)). Thus the union is certainly disjoint.</p>
</div>
</div>
</div>
</section>
<section id="section-12" class="level7">
<p class="heading"></p>
<p><strong>M6.</strong> Prove the second of De Morgan’s laws: for sets <span class="math inline">\(E_1,\dots, E_n\)</span>: <span class="math display">\[ \left(\bigcap_{i=1}^n E_i\right)^c = \bigcup_{i=1}^n E_i^c \,.\]</span></p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>As usual, we need to show that any element <span class="math inline">\(\omega\)</span> belonging to the first set belongs to the second, and vice versa.</p>
<p>Suppose first that <span class="math inline">\(\omega\in(\bigcap_{i=1}^n E_i)^c\)</span>. Then <span class="math inline">\(\omega\)</span> does not belong to of the sets <span class="math inline">\(E_i\)</span>, and so there must be at least one set, say <span class="math inline">\(E_j\)</span>, with <span class="math inline">\(\omega \notin E_j\)</span> (i.e.&nbsp;with <span class="math inline">\(\omega \in E_j^c\)</span>). But this implies that <span class="math inline">\(\omega \in \bigcup_{i=1}^n E_i'\)</span>.</p>
<p>Working in the other direction, suppose that <span class="math inline">\(\omega\)</span> belongs to the set on the RHS. Then there is at least one set <span class="math inline">\(E_k\)</span> with <span class="math inline">\(\omega\in E_k^c\)</span>. Thus <span class="math inline">\(\omega\notin \bigcap_{i=1}^n E_i\)</span>, since <span class="math display">\[ E_k^c \cap \left(\bigcap_{i=1}^n E_i\right) \subseteq (E_k^c\cap E_k)= \emptyset \,. \]</span></p>
<p>Therefore <span class="math inline">\(\omega \in(\bigcap_{i=1}^n E_i)^c\)</span>, as required.</p>
</div>
</div>
</div>
</section>
<section id="section-13" class="level7">
<p class="heading"></p>
<p><strong>M7.</strong> Let <span class="math inline">\(\mathbb P\)</span> be a probability function and <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> events. Show that <span class="math display">\[
       \mathbb{P}(A^c\cap B^c) = 1-\mathbb{P}(A)-\mathbb{P}(B) + \mathbb{P}(A \cap B).
       \]</span></p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p><span class="math display">\[
\begin{split}
            \mathbb{P}(A^c\cap B^c) &amp;= \mathbb{P}((A\cup B)^c) \qquad\text{ by De Morgan's law}\\
            &amp;=1 - \mathbb{P}(A\cup B) \qquad\text{ by (P4)}\\
            &amp;=1- \mathbb{P}(A) - \mathbb{P}(B) + \mathbb{P}(A\cap B) \qquad\text{ by (P6)}.
\end{split}
\]</span></p>
</div>
</div>
</div>
</section>
<section id="section-14" class="level7">
<p class="heading"></p>
<p><strong>M8.</strong> Show that if <span class="math inline">\(B\)</span> is an event such that <span class="math inline">\(\mathbb{P}(B) =1\)</span> (but not necessarily <span class="math inline">\(B=\Omega\)</span>), then for all events <span class="math inline">\(A\)</span>, <span class="math inline">\(\mathbb{P}(A\cap B)=\mathbb{P}(A)\)</span>.</p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Since <span class="math inline">\(A\cup B\supseteq B\)</span> for any event <span class="math inline">\(A\)</span>, it holds that <span class="math inline">\(\mathbb{P}(A\cup B)\geq \mathbb{P}(B)=1\)</span>. Hence, <span class="math inline">\(\mathbb{P}(A\cup B)=1\)</span> by axiom (P1) and <span class="math display">\[
\begin{split}
\mathbb{P}(A\cap B) &amp;= \mathbb{P}(A)+\mathbb{P}(B)-\mathbb{P}(A\cup B) \text{ by property (P6)}\\
&amp;=\mathbb{P}(A)+1-1 =\mathbb{P}(A).
\end{split}
\]</span></p>
</div>
</div>
</div>
</section>
<section id="section-15" class="level7">
<p class="heading"></p>
<p><strong>M9.</strong> Consider events <span class="math inline">\(A\)</span>, <span class="math inline">\(B\)</span>, and <span class="math inline">\(C\)</span>, which can occur in some experiment. Show that the probability that only <span class="math inline">\(A\)</span> occurs (and not <span class="math inline">\(B\)</span> or <span class="math inline">\(C\)</span>) is equal to <span class="math inline">\(\mathbb{P}(A \cup B \cup C) - \mathbb{P}(B) - \mathbb{P}(C) + \mathbb{P}(B \cap C)\)</span>.</p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>The event “only <span class="math inline">\(A\)</span> occurs and not <span class="math inline">\(B\)</span> or <span class="math inline">\(C\)</span>” is the event <span class="math inline">\(A \cap (B \cup C)^c\)</span>. The trick in the calculation below is a common one: any event <span class="math inline">\(D\)</span> can be split into two disjoint components by choosing an arbitrary other event <span class="math inline">\(A\)</span> and writing <span class="math display">\[ D=\Omega\cap D=(A\cap D)\cup(A^c\cap D)\,. \]</span></p>
<p>We use this below with the choice <span class="math inline">\(D=(B\cup C)^c\)</span>: <span class="math display">\[
\begin{split}
\mathbb{P}(A \cap (B \cup C)^c) &amp;= \mathbb{P}((B\cup C)^c)-\mathbb{P}(A^c\cap(B\cup C)^c)\\
&amp;= \mathbb{P}((B\cup C)^c)-\mathbb{P}((A\cup B\cup C)^c) \text{ by De Morgan's law}\\
&amp;=1-\mathbb{P}(B\cup C)-1+\mathbb{P}(A\cup B\cup C) \text{ by (P4)}.
\end{split}
\]</span></p>
<p>We cancel the ones and use that <span class="math inline">\(\mathbb{P}(B\cup C)=\mathbb{P}(B)+\mathbb{P}(C)-\mathbb{P}(B\cap C)\)</span> according to (P6) to obtain the desired result.</p>
</div>
</div>
</div>
<section id="section-16" class="level22">
<p class="heading"></p>
</section>
</section>
</section>
<section id="dessert" class="level2">
<h2 class="anchored" data-anchor-id="dessert">Dessert</h2>
<p><em>Still hungry for more? Try these if you want to push yourself further.</em></p>
<section id="section-17" class="level7">
<p class="heading"></p>
<p><strong>D1.</strong> Show that for <span class="math inline">\(n&gt;0\)</span>, <span class="math display">\[ \sum_{i=0}^n (-1)^i{n \choose i} = 0 \,.\]</span></p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>We know from the binomial theorem that for <span class="math inline">\(a,b\in \mathbb{R}\)</span> and <span class="math inline">\(n\in\mathbb{N}\)</span>, <span class="math display">\[ (a+b)^n = \sum_{i=0}^n {n\choose i}a^i b^{n-i} \,.\]</span></p>
<p>Substituting <span class="math inline">\(a=-1\)</span> and <span class="math inline">\(b=1\)</span> gives the required result.</p>
</div>
</div>
</div>
</section>
<section id="section-18" class="level7">
<p class="heading"></p>
<p><strong>D2.</strong> The famous <strong>Birthday Problem</strong>. If there are <span class="math inline">\(n\)</span> people in a room, what is the probability that at least two people have a common birthday? (Ignore leap years for simplicity!)</p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>As with many problems of this sort, it is easier to calculate the probability of the complementary event: that is, the probability that everybody has a distinct birthday. With <span class="math inline">\(n\)</span> people and 365 days in the year, there is a total of <span class="math inline">\(365^n\)</span> possible outcomes, <span class="math inline">\(|\Omega| = 365^n\)</span>. All outcomes have equal probability. How many of these have all <span class="math inline">\(n\)</span> birthdays distinct? There are <span class="math display">\[ 365\cdot 364\cdot\cdots\cdot(365-n+1)=\frac{365!}{(365-n)!}\]</span> outcomes of this kind because we have 365 possible choices for the first person, then 364 for the second, and so on, and <span class="math inline">\(365-(n-1)\)</span> choices for the <span class="math inline">\(n\)</span>-th person. Thus the probability that at least two people have a common birthday is given by <span class="math display">\[1-\frac{365!}{(365-n)!}\frac{1}{365^n} \,. \]</span></p>
</div>
</div>
</div>
</section>
<section id="section-19" class="level7">
<p class="heading"></p>
<p><strong>D3.</strong> Let <span class="math inline">\(k\)</span> be a non-negative integer. How many distinct integer-valued vectors <span class="math inline">\((n_1,n_2,\ldots, n_r)\)</span> are there which satisfy both of the following constraints?</p>
<ol type="i">
<li><span class="math inline">\(n_j \geq k\)</span> for all <span class="math inline">\(j=1,2,\ldots, r\)</span></li>
<li><span class="math inline">\(n_1+n_2+\dots+ n_r = n\)</span>.</li>
</ol>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Let <span class="math inline">\(m_j = n_j-(k-1) \geq 1\)</span>. The number of solutions of</p>
<p><span class="math display">\[ n_1+n_2+\dots + n_r = n, \quad\text{with $n_j\geq k$ for all $j$} \]</span></p>
<p>is equal to the number of solutions to <span class="math display">\[ m_1+m_2+\dots + m_r = n - r(k-1), \quad\text{with $m_j\geq 1$ for all $j$.} \]</span></p>
<p>The number of such solutions is given by <span class="math display">\[ C^{n-r(k-1)-1}_{r-1}= {{n-r(k-1)-1}\choose{r-1}} \,.\]</span> Alternatively, this problem is equivalent to having to divide <span class="math inline">\(n\)</span> sweets among <span class="math inline">\(r\)</span> children, such that each child gets at least <span class="math inline">\(k\)</span> sweets each. We can do this by first of all giving each child <span class="math inline">\(k\)</span> sweets, meaning that there are now <span class="math inline">\(n-rk\)</span> sweets left to divide (where we are allowed to give some children zero extra sweets). The number of ways of doing this is <span class="math display">\[  C^{(n-rk)+r-1}_{r-1}= {{n-r(k-1)-1}\choose{r-1}} \,.\]</span></p>
</div>
</div>
</div>
</section>
<section id="section-20" class="level7">
<p class="heading"></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge question
</div>
</div>
<div class="callout-body-container callout-body">
<p>How many vectors <span class="math inline">\((x_1,x_2,\dots,x_n)\)</span> are there, such that each <span class="math inline">\(x_i\)</span> is a non-negative integer and <span class="math display">\[ \sum_{i=1}^n x_i \leq k \,, \]</span> where <span class="math inline">\(k\geq 0\)</span> is an integer?<br>
Can you find a closed form expression for this number (one not involving any summation symbols)?<br>
Does the number of such vectors increase faster as we change <span class="math inline">\(n\to n+1\)</span> or <span class="math inline">\(k\to k+1\)</span>?</p>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>